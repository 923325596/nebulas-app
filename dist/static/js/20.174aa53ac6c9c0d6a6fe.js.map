{"version":3,"sources":["webpack:///src/components/question/create.vue","webpack:///./src/components/question/create.vue?5fed","webpack:///./src/components/question/create.vue"],"names":["neb","_nebulas_0_5_2_nebulas_default","a","Neb","nebPay","nebpay_default","data","title","date","questionItem","questionList","storage","get","addStatus","questionType","modalVisible","questionTitle","questionOptions","showOption","form","typeObj","radio","checkbox","textarea","dappAddress","net","watch","newVal","oldVal","this","handler","question","forEach","item","index","num","deep","created","fetchData","switchNet","methods","value","setRequest","HttpRequest","length","time","state","stateTitle","checked","push","onSubmit","console","log","addQuestion","validateQuestion","trim","$message","error","i","split","type","isNeed","options","handleClickType","deleteItem","splice","save","alert","publish","_this","callArgs","stringify_default","nebPayCall","loading","$loading","fullscreen","text","close","message","$router","path","queryByHash","hash","successCb","_this2","api","getTransactionReceipt","then","receipt","status","execute_error","clearInterval","timer","callFunc","cb","_this3","serialNumber","call","listener","res","Object","utils","txhash","setInterval","queryTimer","queryInterval","queryPayInfo","resObj","JSON","parse","msg","catch","err","question_create","render","_vm","_h","$createElement","_c","_self","ref","attrs","model","label-width","label","callback","$$v","$set","expression","_v","staticClass","_l","key","_s","option","_e","icon","on","click","$event","round","span","staticStyle","width","placeholder","visible","update:visible","auto-complete","rows","slot","staticRenderFns","Component","__webpack_require__","normalizeComponent","create","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/20.174aa53ac6c9c0d6a6fe.js","sourcesContent":["<template>\n  <el-form ref=\"form\" :model=\"form\" label-width=\"80px\">\n    <el-form-item label=\"问卷标题\">\n        <el-input v-model=\"questionItem.title\"></el-input>\n    </el-form-item>\n    <div class=\"content\">\n      <div class=\"question\" v-for=\"(question, index) in questionItem.question\" :key=\"index\">\n        <div class=\"question-row\">\n          <div class=\"question-left\">\n            <p>\n              {{question.num}}、{{question.title}}\n              <span class=\"question-type\">\n                [{{typeObj[question.type]}}]\n              </span>\n            </p>\n            <el-radio label=\"1\" v-for=\"option in question.options\" v-if=\"question.type === 'radio'\" :key=\"option\">\n              {{option}}\n            </el-radio>\n            <el-checkbox v-for=\"option in question.options\" v-if=\"question.type === 'checkbox'\" :key=\"option\">\n              {{option}}\n            </el-checkbox>\n            <el-input\n              type=\"textarea\"\n              v-if=\"question.type === 'textarea'\"\n            >\n            </el-input>\n          </div>\n          <div class=\"question-right\">\n            <el-button type=\"primary\" icon=\"el-icon-delete\" @click=\"deleteItem(index)\">删除</el-button>\n          </div>\n        </div>\n      </div>\n    </div>\n    <el-form-item>\n        <el-button type=\"primary\" @click=\"addQuestion\">添加问题</el-button>\n    </el-form-item>\n    <el-form-item label=\"问题类型\" v-if=\"addStatus\">\n      <el-button type=\"primary\" round @click=\"handleClickType('radio')\">单选</el-button>\n      <el-button type=\"primary\" round @click=\"handleClickType('checkbox')\">多选</el-button>\n      <el-button type=\"primary\" round @click=\"handleClickType('textarea')\">文本框</el-button>\n    </el-form-item>\n    <el-form-item label=\"截止日期\">\n        <el-col :span=\"11\">\n          <el-date-picker type=\"date\" placeholder=\"选择日期\" v-model=\"date\" style=\"width: 100%;\"></el-date-picker>\n        </el-col>\n    </el-form-item>\n    <el-form-item>\n      <el-button type=\"primary\" @click=\"publish\">发布问卷</el-button>\n    </el-form-item>\n    <el-dialog title=\"问题\" :visible.sync=\"modalVisible\">\n      <el-form :model=\"form\" label-width=\"80px\">\n        <el-form-item label=\"题目标题\">\n          <el-input v-model=\"questionTitle\" auto-complete=\"off\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"题目选项\" v-if=\"showOption\">\n          <el-input\n            type=\"textarea\"\n            :rows=\"2\"\n            placeholder=\"多个选项用半角逗号','分隔开\"\n            v-model=\"questionOptions\">\n          </el-input>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"modalVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"validateQuestion\">确 定</el-button>\n      </div>\n    </el-dialog>\n  </el-form>\n</template>\n\n<script>\nimport NebPay from 'nebpay.js';\nimport Nebulas from 'nebulas';\nimport storage from '../../utils/storage';\nimport { isPC } from '../../utils/utils';\n\nconst neb = new Nebulas.Neb();\nconst nebPay = new NebPay();\nexport default {\n  data () {\n    return {\n      title: '',\n      date: '',\n      questionItem: {},\n      questionList: storage.get(),\n      addStatus: false,\n      questionType: '',\n      modalVisible: false,\n      questionTitle: '',\n      questionOptions: '',\n      showOption: true,\n      form: {},\n      typeObj: {\n        radio: '单选',\n        checkbox: '多选',\n        textarea: '文本框'\n      },\n      dappAddress: 'n1gGz8QkZevfryw2Z3sD48t6xzYThTZgFpC',\n      net: 'https://mainnet.nebulas.io'\n    };\n  },\n  watch: {\n    questionType (newVal, oldVal) {\n      this.modalVisible = true;\n      if (newVal === '文本框') {\n        this.showOption = false;\n      }\n    },\n    questionItem: {\n      handler (newVal) {\n        newVal.question.forEach((item, index) => {\n          item.num = `Q${index + 1}`;\n        });\n      },\n      deep: true\n    }\n  },\n  created () {\n    this.fetchData();\n    this.switchNet(this.net);\n  },\n  methods: {\n    switchNet (value) {\n      neb.setRequest(new Nebulas.HttpRequest(value));\n    },\n    fetchData () {\n      let item = {};\n      item.num = this.questionList.length + 1;\n      item.title = '';\n      item.time = '';\n      item.state = 'noissue';\n      item.question = [];\n      item.stateTitle = '未发布';\n      item.checked = false;\n      this.questionItem = item;\n      this.questionList.push(this.questionItem);\n    },\n    onSubmit () {\n      console.log('submit!');\n    },\n    addQuestion () {\n      this.addStatus = true;\n    },\n    validateQuestion () {\n      let questionTitle = this.questionTitle.trim();\n      if (questionTitle === '') return this.$message.error('题目不能为空');\n      if (this.showOption) {\n        let questionOptions = this.questionOptions.trim();\n        if (questionOptions === '') return this.$message.error('选项不能为空！');\n        questionOptions = questionOptions.split(',');\n        for (let i = 0, length = questionOptions.length; i < length; i++) {\n          if (questionOptions[i].trim() === '') {\n            return this.$message.error('存在某个选项内容为空');\n          }\n        };\n        this.questionItem.question.push({\n          'num': this.questionItem.question.length - 1,\n          'title': questionTitle,\n          'type': this.questionType,\n          'isNeed': true,\n          'options': questionOptions\n        });\n        this.modalVisible = false;\n      } else {\n        this.questionItem.question.push({\n          'num': this.questionItem.question.length - 1,\n          'title': questionTitle,\n          'type': this.questionType,\n          'isNeed': true\n        });\n        this.modalVisible = false;\n      }\n    },\n    handleClickType (type) {\n      this.questionType = type;\n      this.modalVisible = true;\n      if (type === 'textarea') {\n        this.showOption = false;\n      }\n    },\n    deleteItem (index) {\n      this.questionItem.question.splice(index, 1);\n    },\n    save () {\n      this.questionItem.time = this.date;\n      if (this.questionItem.question.length === 0) {\n        alert('问卷为空无法保存');\n      } else {\n        storage.save(this.questionList);\n      }\n    },\n    publish () {\n      this.questionItem.time = this.date;\n      if (this.questionItem.title === '') {\n        return this.$message.error('标题为空无法保存');\n      }\n      if (this.questionItem.question.length === 0) {\n        return this.$message.error('问卷为空无法保存');\n      } else {\n        this.questionItem.state = 'inissue';\n        this.questionItem.stateTitle = '发布中';\n        storage.save(this.questionList);\n        const value = '0';\n        const callFunc = 'create';\n        const callArgs = JSON.stringify([this.questionItem.title, this.date, 'inissue', this.questionItem.question]);\n        this.nebPayCall(callFunc, callArgs, value, () => {\n          this.loading = this.$loading({\n            fullscreen: true,\n            text: '正在查询交易，请等待'\n          });\n        }, () => {\n          this.loading.close();\n          this.title = '';\n          this.$message({\n            message: '新建问卷成功',\n            type: 'success'\n          });\n          this.$router.push({path: '/question/list'});\n        });\n      }\n    },\n    queryByHash (hash, successCb) {\n      neb.api.getTransactionReceipt({hash}).then((receipt) => {\n        console.log(receipt);\n        if (receipt.status === 0) {\n          this.message = receipt.execute_error;\n          this.$message.error(receipt.execute_error);\n          this.loading.close();\n          clearInterval(this.timer);\n        }\n        if (receipt.status === 2) {\n          this.loading = this.$loading({\n            fullscreen: true,\n            text: '正在查询交易，请等待'\n          });\n        }\n        if (receipt.status === 1) {\n          this.loading.close();\n          console.error('clear', this.timer);\n          clearInterval(this.timer);\n          this.timer = null;\n          successCb(receipt);\n        }\n      });\n    },\n    nebPayCall (callFunc, callArgs, value, cb, successCb) {\n      this.serialNumber = nebPay.call(this.dappAddress, value, callFunc, callArgs, {\n        listener: (res) => {\n          if (!isPC()) {\n            return;\n          }\n          if (res.txhash) {\n            const hash = res.txhash;\n            this.timer = setInterval(() => {\n              this.queryByHash(hash, successCb);\n              console.error('timer', this.timer);\n            }, 5000);\n          }\n        }\n      });\n      if (!isPC()) {\n        const queryTimer = setInterval(() => {\n          const queryCb = (data) => {\n            clearInterval(queryTimer);\n            cb(data.hash);\n            this.timer = setInterval(() => {\n              console.error('timer', this.timer);\n              this.queryByHash(data.hash, successCb);\n            }, 5000);\n          };\n          this.queryInterval(queryCb);\n        }, 3000);\n      }\n    },\n    queryInterval (cb) {\n      nebPay.queryPayInfo(this.serialNumber)\n        .then(res => {\n          console.log(`tx result: ${res}`);\n          const resObj = JSON.parse(res);\n          console.log(resObj);\n          if (resObj.msg === 'success') {\n            cb && cb(resObj.data);\n          }\n        })\n        .catch(function (err) {\n          console.log('err', err);\n        });\n    }\n  }\n};\n</script>\n\n<style scoped>\n  .question {\n    margin-bottom: 20px;\n  }\n  .content {\n    padding-left: 80px;\n    padding-bottom: 0;\n  }\n  .question-row {\n    display: flex;\n    justify-content: space-between;\n  }\n  .question-left {\n    width: 50%;\n  }\n\n  .question-type {\n    color: #409EFF;\n    font-size: 14px;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/question/create.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"问卷标题\"}},[_c('el-input',{model:{value:(_vm.questionItem.title),callback:function ($$v) {_vm.$set(_vm.questionItem, \"title\", $$v)},expression:\"questionItem.title\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"content\"},_vm._l((_vm.questionItem.question),function(question,index){return _c('div',{key:index,staticClass:\"question\"},[_c('div',{staticClass:\"question-row\"},[_c('div',{staticClass:\"question-left\"},[_c('p',[_vm._v(\"\\n            \"+_vm._s(question.num)+\"、\"+_vm._s(question.title)+\"\\n            \"),_c('span',{staticClass:\"question-type\"},[_vm._v(\"\\n              [\"+_vm._s(_vm.typeObj[question.type])+\"]\\n            \")])]),_vm._v(\" \"),_vm._l((question.options),function(option){return (question.type === 'radio')?_c('el-radio',{key:option,attrs:{\"label\":\"1\"}},[_vm._v(\"\\n            \"+_vm._s(option)+\"\\n          \")]):_vm._e()}),_vm._v(\" \"),_vm._l((question.options),function(option){return (question.type === 'checkbox')?_c('el-checkbox',{key:option},[_vm._v(\"\\n            \"+_vm._s(option)+\"\\n          \")]):_vm._e()}),_vm._v(\" \"),(question.type === 'textarea')?_c('el-input',{attrs:{\"type\":\"textarea\"}}):_vm._e()],2),_vm._v(\" \"),_c('div',{staticClass:\"question-right\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-delete\"},on:{\"click\":function($event){_vm.deleteItem(index)}}},[_vm._v(\"删除\")])],1)])])})),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addQuestion}},[_vm._v(\"添加问题\")])],1),_vm._v(\" \"),(_vm.addStatus)?_c('el-form-item',{attrs:{\"label\":\"问题类型\"}},[_c('el-button',{attrs:{\"type\":\"primary\",\"round\":\"\"},on:{\"click\":function($event){_vm.handleClickType('radio')}}},[_vm._v(\"单选\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"round\":\"\"},on:{\"click\":function($event){_vm.handleClickType('checkbox')}}},[_vm._v(\"多选\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"round\":\"\"},on:{\"click\":function($event){_vm.handleClickType('textarea')}}},[_vm._v(\"文本框\")])],1):_vm._e(),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"截止日期\"}},[_c('el-col',{attrs:{\"span\":11}},[_c('el-date-picker',{staticStyle:{\"width\":\"100%\"},attrs:{\"type\":\"date\",\"placeholder\":\"选择日期\"},model:{value:(_vm.date),callback:function ($$v) {_vm.date=$$v},expression:\"date\"}})],1)],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.publish}},[_vm._v(\"发布问卷\")])],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"问题\",\"visible\":_vm.modalVisible},on:{\"update:visible\":function($event){_vm.modalVisible=$event}}},[_c('el-form',{attrs:{\"model\":_vm.form,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"题目标题\"}},[_c('el-input',{attrs:{\"auto-complete\":\"off\"},model:{value:(_vm.questionTitle),callback:function ($$v) {_vm.questionTitle=$$v},expression:\"questionTitle\"}})],1),_vm._v(\" \"),(_vm.showOption)?_c('el-form-item',{attrs:{\"label\":\"题目选项\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":2,\"placeholder\":\"多个选项用半角逗号','分隔开\"},model:{value:(_vm.questionOptions),callback:function ($$v) {_vm.questionOptions=$$v},expression:\"questionOptions\"}})],1):_vm._e()],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.modalVisible = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.validateQuestion}},[_vm._v(\"确 定\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-2b805c32\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.2@vue-loader/lib/selector.js?type=template&index=0!./src/components/question/create.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2b805c32\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=styles&index=0!./create.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=script&index=0!./create.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=script&index=0!./create.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2b805c32\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=template&index=0!./create.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-2b805c32\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/question/create.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}