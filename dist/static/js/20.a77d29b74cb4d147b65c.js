webpackJsonp([20],{"/OkQ":function(t,e){},hbHk:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("jOGT"),i=s.n(n),a=s("+Mly"),r=s.n(a),o=s("oAV5"),l=s("8MJb"),c=r.a.Account,u=new r.a.Neb,h=new i.a,d={data:function(){return{value:"",content:"",list:[],detail:[],visible:!1,errorText:"",net:"https://mainnet.nebulas.io",dappAddress:"n1yvgpF2cSsHnBP4j2jQNgSZtSmhJASPZ75",hasExtension:!0,id:0,topPopup:!1,pending:!1,message:"",toast:!1}},created:function(){this.switchNet(this.net),this.getCandyList()},methods:{handleChange:function(t){console.log(t),this.net=t;var e=this.netArr.findIndex(function(e){return e.value===t});this.dappAddress=this.netArr[e].address,this.switchNet(t)},switchNet:function(t){console.log(t),u.setRequest(new r.a.HttpRequest(t))},getCandyList:function(){var t=this,e=c.NewAccount().getAddressString(),s={function:"list",args:""};this.pending=!0,u.api.call(e,this.dappAddress,"0","0","1000000","2000000",s).then(function(e){t.pending=!1;var s=e.result;"null"!==s?(s=JSON.parse(s),t.list=s.sort(function(t,e){return e.id-t.id})):t.result=[]}).catch(function(t){return console.log("error:"+t)})},selectItem:function(t){this.$router.push({path:"/candy/detail/"+t.id})},showToast:function(){var t=this;this.toast=!0,this.toastTimer&&clearTimeout(this.toastTimer),this.toastTimer=setTimeout(function(){t.toast=!1},2e3)},hideToast:function(){this.toast=!1,this.toastTimer&&clearTimeout(this.toastTimer)},queryByHash:function(t,e){var s=this;u.api.getTransactionReceipt({hash:t}).then(function(t){console.log(t),0===t.status&&(s.message=t.execute_error,s.pending=!1,clearInterval(s.timer)),2===t.status&&(s.pending=!0),1===t.status&&(s.pending=!1,console.error("clear",s.timer),clearInterval(s.timer),s.timer=null,e(t))})},nebPayCall:function(t,e,s,n,i){var a=this;if(this.serialNumber=h.call(this.dappAddress,s,t,e,{listener:function(t){if(Object(o.b)()&&t.txhash){var e=t.txhash;a.timer=setInterval(function(){a.queryByHash(e,i),console.error("timer",a.timer)},5e3)}}}),!Object(o.b)())var r=setInterval(function(){a.queryInterval(function(t){clearInterval(r),n(t.hash),a.timer=setInterval(function(){console.error("timer",a.timer),a.queryByHash(t.hash,i)},5e3)})},3e3)},queryInterval:function(t){h.queryPayInfo(this.serialNumber).then(function(e){console.log("tx result: "+e);var s=JSON.parse(e);console.log(s),"success"===s.msg&&t&&t(s.data)}).catch(function(t){console.log("err",t)})}},components:{Avatar:l.a}},m={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"body"},[t.pending?s("div",{staticClass:"loading"},[s("mu-circular-progress",{attrs:{size:90,color:"secondary"}})],1):t._e(),t._v(" "),t.list.length?s("div",{staticClass:"list"},[s("mu-paper",{staticClass:"list-wrap",attrs:{"z-depth":1}},[s("mu-list",[s("mu-sub-header",[t._v("糖果列表")]),t._v(" "),t._l(t.list,function(e,n){return s("mu-list-item",{key:n,attrs:{avatar:"",button:"",ripple:!1},on:{click:function(s){t.selectItem(e)}}},[s("mu-list-item-action",[s("mu-avatar",[s("avatar",{attrs:{avatar:e.author}})],1)],1),t._v(" "),s("mu-list-item-content",[s("mu-list-item-title",[t._v(t._s(e.title))]),t._v(" "),s("mu-list-item-sub-title",[t._v(t._s(e.date))])],1)],1)})],2)],1)],1):t._e()])},staticRenderFns:[]};var v=s("vSla")(d,m,!1,function(t){s("/OkQ")},null,null);e.default=v.exports}});
//# sourceMappingURL=20.a77d29b74cb4d147b65c.js.map