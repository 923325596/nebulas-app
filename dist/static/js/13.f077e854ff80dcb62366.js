webpackJsonp([13],{QQVF:function(t,e){},aLxu:function(t,e){t.exports="data:image/png;base64,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"},iFHq:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("3cXf"),r=s.n(a),i=s("jOGT"),n=s.n(i),o=s("YUCf"),l=s.n(o),c=s("oAV5"),u=s("8MJb"),h=l.a.Account,v=new l.a.Neb,g=new n.a,d=n.a.config.mainnetUrl,m={data:function(){return{value:"",content:"",city:"",result:!0,visible:!1,errorText:"",net:"https://mainnet.nebulas.io",dappAddress:"n1exZbEUEkjMsdgqqgV6cRiDH1Y6uU7MDQT",hasExtension:!0,list:[],topPopup:!1,pending:!1,current:"",message:"",toast:!1,currentPage:1,pageList:[]}},created:function(){console.log(Object(c.b)()),this.switchNet(this.net),this.getCompanyList()},methods:{init:function(){try{if("undefined"==typeof webExtensionWallet)throw new Error("Extension wallet is not installed, please install it first.")}catch(t){console.log(t)}},getCompanyList:function(){var t=this;this.pending=!0;var e=h.NewAccount().getAddressString(),s={function:"list",args:""};v.api.call(e,this.dappAddress,"0","0","1000000","2000000",s).then(function(e){var s=e.result;"null"!==s?(s=JSON.parse(s),t.list=s,t.pending=!1,t.handlePageChange(1)):t.result=[]}).catch(function(t){return console.log("error:"+t)})},getItemDetail:function(t){var e=this;this.current=t;var s=h.NewAccount().getAddressString(),a={function:"get",args:r()([t])};v.api.call(s,this.dappAddress,"0","0","1000000","2000000",a).then(function(t){e.afterSearch(t)}).catch(function(t){return console.log("error:"+t)})},handlePageChange:function(t){this.currentPage=t,this.pageList=this.list.slice(10*(t-1),10*t)},switchNet:function(t){v.setRequest(new l.a.HttpRequest(t))},search:function(){this.value||0===this.value?this.getItemDetail(this.value):this.errorText="请输入"},afterSearch:function(t){console.log(t);var e=t.result;"null"!==e?(e.execute_err&&alert(e.execute_err),(e=JSON.parse(e)).key?this.result=e:this.result=null):this.result=!1},add:function(){this.visible=!0},submit:function(){var t=this;if(this.value&&this.content&&this.city){var e=this.dappAddress,s=r()([this.value,this.content,this.city]);this.serialNumber=g.call(e,"0","save",s,{listener:this.cbPush,callback:d}),Object(c.b)()||(this.queryTimer=setInterval(function(){t.queryInterval()},5e3))}else this.errorText="请输入"},cbPush:function(t){var e=this,s=t;if(console.log("res of push:"+r()(t)),!t.txhash)return this.message="您取消了交易！",void this.showToast();if(Object(c.b)()){var a=s.txhash;this.timer=setInterval(function(){v.api.getTransactionReceipt({hash:a}).then(function(t){console.log(t),0===t.status&&(e.message=t.execute_error,e.showToast(),e.pending=!1,clearInterval(e.timer)),2===t.status&&(e.pending=!0),1===t.status&&(e.pending=!1,clearInterval(e.timer),e.topPopup=!0,setTimeout(function(){e.topPopup=!1},2e3),e.getCompanyList(),e.current&&e.getItemDetail(e.current),e.value="",e.content="",e.city="")})},5e3)}},queryInterval:function(){var t=this;this.serialNumber&&(this.pending=!0,g.queryPayInfo(this.serialNumber).then(function(e){console.log("tx result: "+e);var s=JSON.parse(e);console.log(s),0===s.code&&1===s.data.status&&(t.topPopup=!0,setTimeout(function(){t.topPopup=!1},2e3),clearInterval(t.queryTimer),console.error(t.queryTimer),t.pending=!1,t.getCompanyList(),t.current&&t.getItemDetail(t.current))}).catch(function(t){console.log("err",t),clearInterval(this.queryTimer),this.pending=!1}))},toggleAgree:function(t,e){var s=this;this.hasExtension||(this.message="请先安装星云扩展钱包插件！",this.showToast());var a=this.dappAddress,i=r()([t,e]);this.serialNumber=g.call(a,"0","toggleAgree",i,{listener:this.cbPush,callback:d}),Object(c.b)()||(this.queryTimer=setInterval(function(){s.queryInterval()},5e3))},showToast:function(){var t=this;this.toast=!0,this.toastTimer&&clearTimeout(this.toastTimer),this.toastTimer=setTimeout(function(){t.toast=!1},2e3)},hideToast:function(){this.toast=!1,this.toastTimer&&clearTimeout(this.toastTimer)}},components:{Avatar:u.a}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"layout"},[t.pending?a("div",{staticClass:"loading"},[a("mu-circular-progress",{attrs:{size:90}})],1):t._e(),t._v(" "),a("mu-alert",{staticClass:"alert",attrs:{color:"success",delete:"",show:t.topPopup,transition:"mu-scale-transition"},on:{"update:show":function(e){t.topPopup=e}}},[a("mu-icon",{attrs:{value:"check_circle"}}),t._v(" 更新成功\n  ")],1),t._v(" "),a("mu-alert",{staticClass:"mu-alert",attrs:{color:"error",delete:"",show:t.toast},on:{"update:show":function(e){t.toast=e}}},[a("mu-icon",{attrs:{value:"warning"}}),t._v(" "+t._s(t.message)+"\n  ")],1),t._v(" "),a("mu-appbar",{staticStyle:{width:"100%"},attrs:{color:"primary"}},[a("div",{staticClass:"logo",attrs:{slot:"left"},slot:"left"},[a("a",{attrs:{href:"https://nebulas.io/cn/incentive.html"}},[a("img",{attrs:{src:s("aLxu"),alt:""}})])]),t._v(" "),a("router-link",{attrs:{to:"/eye"}},[t._v("天眼-企业黑名单曝光平台")]),t._v(" "),a("mu-button",{attrs:{slot:"right",flat:"",to:"/eye/about"},slot:"right"},[t._v("使用说明")]),t._v(" "),a("mu-button",{attrs:{slot:"right",href:"https://github.com/YanYuanFE/nebulas-app",icon:""},slot:"right"},[a("i",{staticClass:"mudocs-icon-custom-github"})])],1),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"body"},[a("div",{staticClass:"app-row"},[a("div",{staticClass:"left"},[a("div",{staticClass:"row"},[a("mu-text-field",{attrs:{disabled:!t.hasExtension,placeholder:"输入你想查找的企业","error-text":t.value?"":t.errorText,"max-length":30},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),t._v(" "),a("mu-button",{staticClass:"demo-raised-button",style:{"margin-left":"10px"},attrs:{raised:"",color:"primary"},on:{click:t.search}},[a("mu-icon",{attrs:{value:"search",left:""}}),t._v("\n              搜索\n            ")],1)],1),t._v(" "),t.result?t._e():a("div",{staticClass:"no-result"},[a("div",{staticClass:"row",style:{"align-items":"center"}},[a("span",[t._v("\n                输入的企业没有记录！\n              ")]),t._v(" "),a("mu-button",{staticClass:"demo-raised-button",attrs:{raised:"",color:"primary"},on:{click:t.add}},[t._v("添加")])],1),t._v(" "),t.visible?a("div",{staticClass:"row"},[a("mu-text-field",{attrs:{placeholder:"所在城市","error-text":t.city?"":t.errorText,"max-length":30},model:{value:t.city,callback:function(e){t.city=e},expression:"city"}})],1):t._e(),t._v(" "),t.visible?a("div",{staticClass:"row",style:{"align-items":"center"}},[a("mu-text-field",{attrs:{placeholder:"描述企业信息","multi-line":"",rows:3,"rows-max":6,"max-length":500,"error-text":t.content?"":t.errorText},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),t._v(" "),a("mu-button",{staticClass:"demo-raised-button",attrs:{raised:"",color:"primary"},on:{click:t.submit}},[t._v("提交")])],1):t._e()]),t._v(" "),t.hasExtension?t._e():a("div",{staticClass:"extension"},[t._v("\n            检测到你尚未安装星云钱包扩展"),a("a",{attrs:{href:"https://github.com/ChengOrangeJu/WebExtensionWallet"}},[t._v("WebExtensionWallet")]),t._v("扩展，请先安装然后使用。\n          ")])]),t._v(" "),a("div",{staticClass:"right"},[t.result&&t.result.key?a("mu-card",[a("mu-card-header",{attrs:{title:"搜索结果"}},[a("mu-avatar",{style:{"margin-left":"-8px"},attrs:{slot:"leftAvatar",color:"pinkA200","text-color":"#FFF"},slot:"leftAvatar"},[t._v("\n                "+t._s(t.result.author.substr(-1,1).toUpperCase())+"\n              ")])],1),t._v(" "),a("mu-card-title",{attrs:{title:t.result.key}}),t._v(" "),a("div",{staticClass:"result"},[a("mu-card-text",[t._v("企业描述： "+t._s(t.result.value))]),t._v(" "),a("mu-card-text",[t._v("所在城市： "+t._s(t.result.city))]),t._v(" "),a("mu-card-text",[t._v("By： "+t._s(t.result.author))])],1),t._v(" "),a("mu-card-actions",[a("mu-button",{staticClass:"flat-button",attrs:{flat:"",color:"primary"},on:{click:function(e){t.toggleAgree(t.result.key,!0)}}},[t._v("\n                "+t._s(t.result.agree.length.toString())+"\n                "),a("mu-icon",{attrs:{right:"",value:"thumb_up"}})],1),t._v(" "),a("mu-button",{staticClass:"flat-button",attrs:{flat:"",color:"secondary"},on:{click:function(e){t.toggleAgree(t.result.key,!1)}}},[t._v("\n                "+t._s(t.result.disagree.length.toString())+"\n                "),a("mu-icon",{attrs:{right:"",value:"thumb_down"}})],1)],1)],1):t._e()],1)]),t._v(" "),a("h2",[t._v("目前共有"+t._s(t.list.length)+"条企业记录")]),t._v(" "),t.list.length?a("div",{staticClass:"card-wrapper"},t._l(t.pageList,function(e,s){return a("mu-card",{key:s,staticClass:"card"},[a("mu-card-header",{attrs:{title:e.key}},[a("mu-avatar",{style:{"margin-left":"-8px"},attrs:{slot:"avatar",color:"blue100","text-color":"#FFF"},slot:"avatar"},[a("avatar",{attrs:{avatar:e.author}})],1)],1),t._v(" "),a("div",{staticClass:"result"},[a("mu-card-text",[t._v("企业描述： "+t._s(e.value))]),t._v(" "),a("mu-card-text",[t._v("所在城市： "+t._s(e.city))]),t._v(" "),a("mu-card-text",[t._v("By： "+t._s(e.author))])],1),t._v(" "),a("mu-card-actions",[a("mu-button",{staticClass:"flat-button",attrs:{flat:"",color:"primary"},on:{click:function(s){t.toggleAgree(e.key,!0)}}},[t._v("\n              "+t._s(e.agree.length.toString())+"\n              "),a("mu-icon",{attrs:{right:"",value:"thumb_up"}})],1),t._v(" "),a("mu-button",{staticClass:"flat-button",attrs:{flat:"",color:"secondary"},on:{click:function(s){t.toggleAgree(e.key,!1)}}},[t._v("\n              "+t._s(e.disagree.length.toString())+"\n              "),a("mu-icon",{attrs:{right:"",value:"thumb_down"}})],1)],1)],1)})):t._e(),t._v(" "),a("div",{staticClass:"pagination"},[t.list.length?a("mu-pagination",{attrs:{total:t.list.length,current:t.currentPage},on:{"update:current":function(e){t.currentPage=e},change:t.handlePageChange}}):t._e()],1)])]),t._v(" "),a("div",{staticClass:"footer"},[t._v("\n    天眼 ©2018 Powered by Nebulas\n  ")])],1)},staticRenderFns:[]};var y=s("vSla")(m,p,!1,function(t){s("QQVF")},"data-v-55187924",null);e.default=y.exports}});
//# sourceMappingURL=13.f077e854ff80dcb62366.js.map