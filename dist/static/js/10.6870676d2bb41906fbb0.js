webpackJsonp([10],{JI0S:function(t,s){},aLxu:function(t,s){t.exports="data:image/png;base64,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"},jNzT:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("3cXf"),r=e.n(a),i=e("jOGT"),n=e.n(i),o=e("YUCf"),l=e.n(o),u=l.a.Account,c=new l.a.Neb,h=new n.a,d={data:function(){return{value:"",content:"",list:[],detail:[],visible:!1,errorText:"",net:"https://mainnet.nebulas.io",dappAddress:"n1gCBrwMTA2om2Unkmvu99MYchFCH1Ca83h",netArr:[{label:"TestNet",value:"https://testnet.nebulas.io",address:"n1zo1HT9cbJTYKhsXM7jfpC8Hh8uiUuP79T"},{label:"MainNet",value:"https://mainnet.nebulas.io",address:"n1emrHvHnDAHeeqQjCXhCUfgiDztxDJupa5"}],hasExtension:!0,writeVal:"",id:0,topPopup:!1,pending:!1,message:"",toast:!1}},created:function(){this.switchNet(this.net),this.getStoryList()},methods:{init:function(){try{if("undefined"==typeof webExtensionWallet)throw new Error("Extension wallet is not installed, please install it first.");this.hasExtension=!0}catch(t){this.hasExtension=!1,console.log(t)}},handleChange:function(t){console.log(t),this.net=t;var s=this.netArr.findIndex(function(s){return s.value===t});this.dappAddress=this.netArr[s].address,this.switchNet(t)},switchNet:function(t){console.log(t),c.setRequest(new l.a.HttpRequest(t))},getStoryList:function(){var t=this,s=u.NewAccount().getAddressString(),e={function:"list",args:""};c.api.call(s,this.dappAddress,"0","0","1000000","2000000",e).then(function(s){var e=s.result;"null"!==e?(e=JSON.parse(e),t.list=e):t.result=[]}).catch(function(t){return console.log("error:"+t)})},getStoryDetail:function(t){var s=this;this.id=t;var e=u.NewAccount().getAddressString(),a={function:"get",args:r()([t])};c.api.call(e,this.dappAddress,"0","0","1000000","2000000",a).then(function(t){var e=t.result;"null"!==e?(e=JSON.parse(e),s.detail=e):s.result=[]}).catch(function(t){return console.log("error:"+t)})},add:function(){if(this.value){var t=this.dappAddress,s=r()([this.value]);this.serialNumber=h.call(t,"0","add",s,{listener:this.cbPush})}else this.errorText="请输入"},write:function(){var t=this;if(this.writeVal){var s=this.dappAddress,e=r()([this.id,this.writeVal]);this.serialNumber=h.call(s,"0","write",e,{listener:this.cbPush}),this.queryTimer=setInterval(function(){t.queryInterval()},5e3)}else this.errorText="请输入"},showToast:function(){var t=this;this.toast=!0,this.toastTimer&&clearTimeout(this.toastTimer),this.toastTimer=setTimeout(function(){t.toast=!1},2e3)},hideToast:function(){this.toast=!1,this.toastTimer&&clearTimeout(this.toastTimer)},cbPush:function(t){var s=this,e=t;console.log("res of push:"+r()(t));var a=e.txhash;this.timer=setInterval(function(){c.api.getTransactionReceipt({hash:a}).then(function(t){console.log(t),0===t.status&&(s.message=t.execute_error,s.showToast(),s.pending=!1,clearInterval(s.timer)),2===t.status&&(s.pending=!0),1===t.status&&(s.pending=!1,clearInterval(s.timer),s.queryTimer&&clearInterval(s.queryTimer),s.topPopup=!0,setTimeout(function(){s.topPopup=!1},2e3),s.getStoryList(),s.value="",s.writeVal="")})},5e3)},queryInterval:function(){var t=this;this.serialNumber&&h.queryPayInfo(this.serialNumber).then(function(s){console.log("tx result: "+s),0===JSON.parse(s).code&&(t.topPopup=!0,setTimeout(function(){t.topPopup=!1},2e3),clearInterval(t.queryTimer),t.getStoryList())})}}},v={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"layout"},[t.pending?a("div",{staticClass:"loading"},[a("mu-circular-progress",{attrs:{size:90}})],1):t._e(),t._v(" "),a("mu-alert",{staticClass:"alert",attrs:{color:"success",delete:"",show:t.topPopup,transition:"mu-scale-transition"},on:{"update:show":function(s){t.topPopup=s}}},[a("mu-icon",{attrs:{value:"check_circle"}}),t._v(" 更新成功\n  ")],1),t._v(" "),a("mu-alert",{staticClass:"mu-alert",attrs:{color:"error",delete:"",show:t.toast},on:{"update:show":function(s){t.toast=s}}},[a("mu-icon",{attrs:{value:"warning"}}),t._v(" "+t._s(t.message)+"\n  ")],1),t._v(" "),a("mu-appbar",{staticStyle:{width:"100%"},attrs:{color:"primary"}},[a("div",{staticClass:"logo",attrs:{slot:"left"},slot:"left"},[a("a",{attrs:{href:"https://nebulas.io/cn/incentive.html"}},[a("img",{attrs:{src:e("aLxu"),alt:""}})])]),t._v(" "),a("router-link",{attrs:{to:"/story"}},[t._v("星云故事接龙")]),t._v(" "),a("mu-button",{attrs:{slot:"right",flat:"",to:"/story/about"},slot:"right"},[t._v("使用说明")]),t._v(" "),a("mu-button",{attrs:{slot:"right",to:"https://github.com/YanYuanFE/nebulas-app",icon:""},slot:"right"},[a("i",{staticClass:"mudocs-icon-custom-github"})])],1),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"body"},[a("div",{staticClass:"app-row"},[a("div",{staticClass:"left"},[a("mu-card",[a("mu-card-header",{attrs:{title:"开始你的故事"}}),t._v(" "),a("div",{staticClass:"card-content"},[a("mu-text-field",{attrs:{"multi-line":"",rows:3,"rows-max":6,"max-length":500,disabled:!t.hasExtension,placeholder:"输入故事开始","error-text":t.value?"":t.errorText},model:{value:t.value,callback:function(s){t.value=s},expression:"value"}}),t._v(" "),a("mu-card-actions",[a("mu-button",{staticClass:"demo-raised-button",attrs:{raised:"",color:"primary"},on:{click:t.add}},[t._v("提交")])],1)],1)],1),t._v(" "),t.hasExtension?t._e():a("div",{staticClass:"extension"},[t._v("\n            检测到你尚未安装星云钱包"),a("a",{attrs:{href:"https://github.com/ChengOrangeJu/WebExtensionWallet"}},[t._v("WebExtensionWallet")]),t._v("扩展，请先安装然后使用。\n          ")])],1),t._v(" "),a("div",{staticClass:"right"},[t.list.length?a("div",{staticClass:"list"},[a("mu-paper",{staticClass:"demo-list-wrap",attrs:{"z-depth":1}},[a("mu-list",[a("mu-sub-header",[t._v("故事列表")]),t._v(" "),t._l(t.list,function(s,e){return a("mu-list-item",{key:e,attrs:{avatar:"",button:"",ripple:!1},on:{click:function(s){t.getStoryDetail(e)}}},[a("mu-list-item-action",[a("mu-avatar",{style:{"margin-left":"-8px"},attrs:{slot:"leftAvatar",color:"pinkA200","text-color":"#FFF"},slot:"leftAvatar"},[t._v("\n                      "+t._s(s.author.substr(-1,1).toUpperCase())+"\n                    ")])],1),t._v(" "),a("mu-list-item-title",[t._v(t._s(s.content[0].content))])],1)})],2)],1)],1):t._e()])]),t._v(" "),t.detail.author?a("div",{staticClass:"detail"},[a("mu-card",[a("mu-card-header",{attrs:{title:"故事详情",subTitle:"Author:"+t.detail.author}},[a("mu-avatar",{style:{"margin-left":"-8px"},attrs:{slot:"avatar",color:"pinkA200",backgroundColor:"transparent"},slot:"avatar"},[t._v("\n              "+t._s(t.detail.author.substr(-1,1).toUpperCase())+"\n            ")])],1),t._v(" "),t._l(t.detail.content,function(s){return a("mu-card-text",{key:s.content},[a("span",{staticClass:"author"},[t._v("By:"+t._s(s.from))]),t._v(":"+t._s(s.content)+"\n          ")])}),t._v(" "),a("div",{staticClass:"card-content"},[a("mu-text-field",{attrs:{"multi-line":"",rows:3,"rows-max":6,"max-length":500,disabled:!t.hasExtension,placeholder:"续写故事","error-text":t.value?"":t.errorText},model:{value:t.writeVal,callback:function(s){t.writeVal=s},expression:"writeVal"}}),t._v(" "),a("mu-card-actions",[a("mu-button",{staticClass:"demo-raised-button",attrs:{raised:"",color:"primary"},on:{click:t.write}},[t._v("提交 ")])],1)],1)],2)],1):t._e()])]),t._v(" "),a("div",{staticClass:"footer"},[t._v("\n     ©2018 Created by Nebulas\n  ")])],1)},staticRenderFns:[]};var p=e("vSla")(d,v,!1,function(t){e("JI0S")},"data-v-d61f475a",null);s.default=p.exports}});
//# sourceMappingURL=10.6870676d2bb41906fbb0.js.map